<?php

namespace USLM\Legislation;

use USLM\Exceptions\AttributeNotFoundException;

class Element{

	public $parent;
	public $xml;

	public function __construct(){

	}

	public function simplexml($xml = null){
		return $this->accessor('xml', $xml);
	}

	protected function required($attributes){
		if(is_array($attributes)){
			foreach($attributes as $attribute){
				if(!isset($this->$attribute)){
					throw new Exception('Attribute ' . $attribute . ' isn\'t set for ' . print_r($this, true) . "\n\n Aborting.");
				}
			}
		}else{
			if(!isset($this->$attributes)){
				throw new Exception('Attribute ' . $attributes . ' isn\'t set for ' . print_r($this, true) . "\n\n Aborting.");
			}
		}
	}

	protected function accessor($attribute, $value = null){
		if(!isset($attribute)){
			throw new Exception('Attribute not set for accessor method.  Aborting');
		}

		if(!isset($value)){
			return $this->$attribute;
		}else{
			$this->$attribute = $value;
		}
	}

	/**
  * Helper method to verify an array of necessary attributes
  *   If any of the attributes don't exist, throw an exception
  */
  protected function checkRequirements($attributes){
    foreach($attributes as $attribute){
      if(!isset($this->$attribute)){
        throw new AttributeNotFoundException("$attribute is not defined on " . get_class($this));
      }
    }
  }
}
